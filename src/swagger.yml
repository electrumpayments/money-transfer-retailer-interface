---
swagger: "2.0"
info:
  description: |
    The Electrum Money Transfer Service Interface is an API designed to enable retailers to integrate with counter-to-counter money transfer service providers. The procedure by which a counter-to-counter money transfer occurs is as follows:
    1. A customer wishing to send money to a recipient registers a profile with the service provider.
    2. Once the customer profile is created, the sender creates an order by making a cash payment at one of the retailer's points of sale (POS). The payment is linked to a unique payout reference generated by the service provider and a sender-selected PIN.
    3. The sender supplies the recipient with the payout reference and PIN.
    4. The recipient redeems the order at any POS of the same retailer by supplying the payout reference and PIN.

    This API defines a RESTful interface that supports the following functionality:
    * Creation and querying of customer profiles.
    * Order creation (a dual message pair transaction consisting of an online payment authorization followed a store-and-forward confirmation or reversal).
    * Order lookup.
    * Order redemption. (a dual message pair transaction consisting of an online redeem authorization followed by a store-and-forward confirmation or reversal).
  version: "0.0.1"
  title: "Money Transfer Service Interface"
  contact:
    name: "Electrum Support"
    url: "http://io.electrum"
    email: "support@electrum.co.za"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
host: "www.example.com"
basePath: "/moneytransfer/v1"
schemes:
- "https"
paths:
  /admin/:
    post:
      summary: "A request to access or update information pertaining to a customer."
      description: |
        Provides support for administrative tasks related to querying or updating a customer's details on the service provider's system.
      operationId: "doCustomerAdmin"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A message containing the data required to carry out the admin request, as well as information about the point-of-sale from which the transaction originates."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferAdminRequest"
      responses:
        200:
          description: "Success"
          schema:
            $ref: "#/definitions/MoneyTransferAdminResponse"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/:
    post:
      summary: "An authorization request to create a money transfer payment order."
      description: |
        Requests that an order be created for the specified payment amount. The request is treated as an online financial authorization message. If the client calling this resource does not receive a response, then a `reversePayment` call must be made to the `/orders/reversals/` resource to ensure the transaction is cancelled with no financial impact.
      operationId: "createOrder"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A message containing the data required to carry out the payment order, as well as information about the point-of-sale from which the transaction originates."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferAuthRequest"
      responses:
        200:
          description: "Success"
          schema:
            $ref: "#/definitions/MoneyTransferAuthResponse"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/confirmations/:
    post:
      summary: "An advice confirming that money transfer payment has been successfully tendered."
      description: |
        Advises that a money transfer payment has been made successfully. This is treated as a store-and-forward transaction. Upon recept, the Electrum service will respond immediately to acknowledge receipt and place the message on a queue for guaranteed delivery to the service provider. If the service provider does not support positive advice message, then this is simply stored for reporting purposes.
      operationId: "confirmPayment"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A payment confirmation."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferConfirmation"
      responses:
        202:
          description: "Accepted"
          schema:
            $ref: "#/definitions/MoneyTransferConfirmation"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/reversals/:
    post:
      summary: "An instruction to reverse a money transfer payment."
      description: |
        Requests that a money transfer payment be reversed. This is be treated as a store-and-forward transaction. Upon recept, the Electrum service will respond immediately to acknowledge receipt and place the message on a queue for guaranteed delivery to the service provider.
      operationId: "reversePayment"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A payment reversal."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferReversal"
      responses:
        202:
          description: "Accepted"
          schema:
            $ref: "#/definitions/MoneyTransferReversal"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/lookups/:
    post:
      summary: "A request to provide information about a money transfer order."
      description: |
        Supports the querying of an existing money transfer order. This will typically be used to retrieve the amount before redeeming an order.
      operationId: "lookupOrder"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A message containing the data required to query an order, as well as information about the point-of-sale from which the transaction originates."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferLookupRequest"
      responses:
        202:
          description: "Accepted."
          schema:
            $ref: "#/definitions/MoneyTransferLookupResponse"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/redemptions/:
    post:
      summary: "An authorisation request to redeem a money transfer order."
      description: |
        Requests that an existing order be paid out to the recipient. The request is treated as an online financial authorization message. If the client calling this resource does not receive a response, then a `reverseRedeem` call must be made to the `/orders/redemptions/reversals/` resource to ensure the transaction is cancelled with no financial impact.
      operationId: "redeemOrder"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A message containing the data required to redeem the order, as well as information about the point-of-sale from which the transaction originates."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferRedeemRequest"
      responses:
        200:
          description: "Success"
          schema:
            $ref: "#/definitions/MoneyTransferRedeemResponse"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/redemptions/confirmations/:
    post:
      summary: "An advice confirming that money transfer redeem has been successfully payed out."
      description: |
        Advises that a money transfer order has been successfully redeemed. This is treated as a store-and-forward transaction. Upon recept, the Electrum service will respond immediately to acknowledge receipt and place the message on a queue for guaranteed delivery to the service provider. If the service provider does not support positive advice message, then this is simply stored for reporting purposes.
      operationId: "confirmRedeem"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A redemption confirmation."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferConfirmation"
      responses:
        202:
          description: "Accepted"
          schema:
            $ref: "#/definitions/MoneyTransferConfirmation"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
  /orders/redemptions/reversals/:
    post:
      summary: "An instruction to reverse a money transfer redemption."
      description: |
        Requests that a money transfer redemption be reversed. This is treated as a store-and-forward transaction. Upon recept, the Electrum service will respond immediately to acknowledge receipt and place the message on a queue for guaranteed delivery to the service provider.
      operationId: "reverseRedeem"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "A redemption reversal."
        required: true
        schema:
          $ref: "#/definitions/MoneyTransferReversal"
      responses:
        202:
          description: "Accepted"
          schema:
            $ref: "#/definitions/MoneyTransferReversal"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ErrorDetail"
        500:
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/ErrorDetail"
        501:
          description: "Not implemented"
          schema:
            $ref: "#/definitions/ErrorDetail"
        503:
          description: "Service Unavailable"
          schema:
            $ref: "#/definitions/ErrorDetail"
        504:
          description: "Gateway Timeout"
          schema:
            $ref: "#/definitions/ErrorDetail"
      security:
      - httpBasic: []
securityDefinitions:
  httpBasic:
    description: |
      All requests require HTTP basic authentication, where user name is the value used in `client.id` of the request and password has been agreed with Electrum.
    type: "basic"
definitions:
  Amounts:
    description: |
      Amounts which make up the transaction. Absent amounts have zero value.
    type: "object"
    properties:
      requestAmount:
        description: "The transaction amount requested by the customer to be authorised or approved. This is the total amount the customer wishes to pay for a service or virtual product."
        $ref: "#/definitions/LedgerAmount"
      approvedAmount:
        description: "The transaction amount which was approved by the upstream entity."
        $ref: "#/definitions/LedgerAmount"
      feeAmount:
        description: "Fees charged by the upstream entity for processing the transaction."
        $ref: "#/definitions/LedgerAmount"
      balanceAmount:
        description: "The remaining balance on the customer's account."
        $ref: "#/definitions/LedgerAmount"
  ErrorDetail:
    description: |
      Represents the outcome of an unsuccessful transaction.
    type: "object"
    required:
    - "errorMessage"
    - "errorType"
    - "id"
    - "requestType"
    properties:
      errorType:
        type: "string"
        description: "The type of error that occurred"
        enum:
        - "TRANSACTION_NOT_ALLOWED_FOR_MERCHANT"
        - "ALREADY_REDEEMED"
        - "PIN_RETRIES_EXCEEDED"
        - "INCORRECT_PIN"
        - "UNABLE_TO_REDEEM"
        - "INVALID_REDEEM_REF"
        - "DAILY_LIMIT_EXCEEDED"
        - "MONTHLY_LIMIT_EXCEEDED"
        - "PROVIDER_SYSTEM_ERROR"
        - "CUSTOMER_CHECK_FAILED"
        - "DUPLICATE_RECORD"
        - "FORMAT_ERROR"
        - "SYSTEM_ERROR"
        - "TRANSACTION_DECLINED"
        - "INVALID_AMOUNT"
        - "ROUTING_ERROR"
        - "TRANSACTION_NOT_SUPPORTED"
        - "UNABLE_TO_LOCATE_RECORD"
        - "UPSTREAM_UNAVAILABLE"
        - "AUTHENTICATION_ERROR"
      errorMessage:
        type: "string"
        description: "A short description of the error"
        minLength: 0
        maxLength: 40
      requestType:
        type: "string"
        description: "The type of request being processed when the error occurred."
        enum:
        - "MONEY_TSF_ADMIN_REQ"
        - "MONEY_TSF_AUTH_REQ"
        - "MONEY_TSF_LOOKUP_REQ"
        - "MONEY_TSF_REDEEM_REQ"
        - "MONEY_TSF_AUTH_CONF_REQ"
        - "MONEY_TSF_AUTH_REV_REQ"
        - "MONEY_TSF_REDEEM_CONF_REQ"
        - "MONEY_TSF_REDEEM_REV_REQ"
      id:
        type: "string"
        description: "The UUID of the message for which the error occurred."
      originalId:
        type: "string"
        description: "The UUID of the original request message in the case of an error occurring for an advice message."
      detailMessage:
        type: "object"
        description: "A free form detailed description of a particular failure condition may optionally be supplied."
  Institution:
    description: |
      Originating, acquiring, processing, or receiving institution details.
    type: "object"
    required:
    - "id"
    - "name"
    properties:
      id:
        type: "string"
        description: "The institution's id as assigned by Electrum"
        pattern: "[0-9]{1,11}"
      name:
        type: "string"
        description: "The institutions's name"
        minLength: 0
        maxLength: 40
  LedgerAmount:
    description: |
      An amount object containing value and currency, and optionally an indicator of DEBIT/CREDIT
    type: "object"
    required:
    - "amount"
    - "currency"
    properties:
      amount:
        type: "integer"
        format: "int64"
        description: "Amount in minor denomination, e.g. R799.95 is encoded as 79995"
      currency:
        type: "string"
        description: "Three digit currency number from ISO 4217, e.g. South African Rand is encoded as 710"
        pattern: "[0-9]{3}"
      ledgerIndicator:
        type: "string"
        description: "Indicates whether this amount is a debit or a credit. Only required when the amount can be either a debit or a credit"
        enum:
        - "DEBIT"
        - "CREDIT"
  Merchant:
    description: |
      Merchant related data.
    type: "object"
    required:
    - "merchantId"
    - "merchantName"
    - "merchantType"
    properties:
      merchantType:
        type: "string"
        description: "The assigned four digit merchant category code"
        pattern: "[0-9]{4}"
      merchantId:
        type: "string"
        description: "The assigned merchant identifier. Also known as card acceptor id"
        minLength: 15
        maxLength: 15
      merchantName:
        description: "The name of a merchant"
        $ref: "#/definitions/MerchantName"
  MerchantName:
    description: |
      Represents the merchant name and location.
    type: "object"
    required:
    - "city"
    - "country"
    - "name"
    - "region"
    properties:
      name:
        type: "string"
        description: "The merchant or trading as name associated with the merchant"
        minLength: 0
        maxLength: 23
      city:
        type: "string"
        description: "The city where the merchant is located"
        minLength: 0
        maxLength: 13
      region:
        type: "string"
        description: "The state or region where the merchant is located"
        minLength: 0
        maxLength: 2
      country:
        type: "string"
        description: "The country where the merchant is located"
        minLength: 0
        maxLength: 2
  MoneyTransferAdminRequest:
    description: |
      Used to submit data in a call to the doCustomerAdmin operation.
    type: "object"
    required:
    - "id"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "customerDetails"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction."
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      customerDetails:
        description: "Personal details of the customer."
        $ref: "#/definitions/PersonalDetails"
  MoneyTransferAdminResponse:
  # TODO: This and the MoneyTransferAdminRequest could be rolled into the same model, unless there is reason to think there may be some divergence in future.
    description: |
      Contains the data returned by a call to the doCustomerAdmin operation.
    type: "object"
    required:
    - "id"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "customerDetails"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Can optionally be used to carry the customer's remaining transaction limit as `balanceAmount` and transaction fee as `feeAmount`."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      customerDetails:
        description: "Personal details of the customer."
        $ref: "#/definitions/PersonalDetails"
  MoneyTransferConfirmation:
    description: |
      An advice that notifies of the positive completion of a transaction.
    type: "object"
    required:
    - "id"
    - "requestId"
    - "thirdPartyIdentifiers"
    - "time"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this advice, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      requestId:
        type: "string"
        description: "The UUID identifying the request that this advice relates to."
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision."
      thirdPartyIdentifiers:
        type: "array"
        description: "The unaltered thirdPartyIdentifiers array as supplied in the response message of the request to be reversed. Required if thirdPartyIdentifiers field was present in the response. If no thirdPartyIdentifiers was received in the response or no response was received then this should be set to the thirdPartyIdentifiers sent in the original request."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
  MoneyTransferLookupRequest:
    description: |
      Used to submit data in a call to the lookupOrder operation.
    type: "object"
    required:
    - "id"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "orderRedeemRef"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Contains the payment amount."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      orderRedeemRef:
        type: "string"
        description: "Reference used by the recipient to redeem the order."
  MoneyTransferLookupResponse:
    description: |
      Contains the data returned by a call to the lookupOrder operation.
    type: "object"
    required:
    - "id"
    - "amounts"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Contains the order amount in `amounts.balanceAmount`."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
  MoneyTransferAuthRequest:
    description: |
      Used to submit data in a call to the createOrder operation.
    type: "object"
    required:
    - "id"
    - "amounts"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "senderDetails"
    - "recipientDetails"
    - "pinBlock"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Contains the payment amount."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      senderDetails:
        description: "Personal details of the sender."
        $ref: "#/definitions/PersonalDetails"
      recipientDetails:
        description: "Personal details of the recipient."
        $ref: "#/definitions/PersonalDetails"
      pinBlock:
        type: "string"
        pattern: "[a-fA-F0-9]{16}"
        description: "Hexadecimal string representing the encrypted PIN to be used by the recipient to redeem the order."
  MoneyTransferAuthResponse:
    description: |
      Contains the data returned by a call to the createOrder operation.
    type: "object"
    required:
    - "id"
    - "amounts"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "senderDetails"
    - "orderRedeemRef"
    - "providerPaymentId"
    - "providerTranId"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Contains the payment amount."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      senderDetails:
        description: "Personal details of the sender."
        $ref: "#/definitions/PersonalDetails"
      orderRedeemRef:
        type: "string"
        description: "Reference used by the recipient to redeem the order."
      providerPaymentId:
        type: "string"
        description: "Reference used by the service provider to identify the payment on their system."
      providerTranId:
        type: "string"
        description: "Reference used by the service provider to uniquely identify the money transfer order on their system."
  MoneyTransferRedeemRequest:
    description: |
      Used to submit data in a call to the `redeemOrder` operation.
    type: "object"
    required:
    - "id"
    - "amounts"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "pinBlock"
    - "orderRedeemRef"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Contains the payment amount."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6) It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      pinBlock:
        type: "string"
        pattern: "[a-fA-F0-9]{16}"
        description: "Hexadecimal string representing the encrypted PIN to be used by the recipient to redeem the order."
      orderRedeemRef:
        type: "string"
        description: "Reference used by the recipient to redeem the order."
  MoneyTransferRedeemResponse:
    description: |
      Contains the data returned by a call to the redeemOrder operation.
    type: "object"
    required:
    - "id"
    - "amounts"
    - "client"
    - "originator"
    - "thirdPartyIdentifiers"
    - "time"
    - "providerPaymentId"
    - "providerTranId"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this transaction, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      amounts:
        description: "Contains the payment amount."
        $ref: "#/definitions/Amounts"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      originator:
        description: "Data relating to the originator of the transaction"
        $ref: "#/definitions/Originator"
      client:
        description: "Data relating to the sender of Transaction."
        $ref: "#/definitions/Institution"
      thirdPartyIdentifiers:
        type: "array"
        description: "An array of identifiers which each identify the transaction within each entity's system."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      basketRef:
        type: "string"
        description: "Used to group multiple transactions which would otherwise be considered independent."
      receiver:
        description: "Data relating to the entity which ultimately processes the request."
        $ref: "#/definitions/Institution"
      settlementEntity:
        description: "Data relating to the entity with whom the Merchant will settle the transaction."
        $ref: "#/definitions/Institution"
      slipData:
        description: "Text to be printed on the customer receipt."
        $ref: "#/definitions/SlipData"
      providerPaymentId:
        type: "string"
        description: "Reference used by the service provider to identify the payment on their system."
      providerTranId:
        type: "string"
        description: "Reference used by the service provider to uniquely identify the money transfer order on their system."
  MoneyTransferReversal:
    description: |
      An advice that notifies that the outcome of an authorisation transaction be reversed. This can be either due to cashier cancellation, or upstream timeout.
    type: "object"
    required:
    - "id"
    - "requestId"
    - "reversalReason"
    - "thirdPartyIdentifiers"
    - "time"
    properties:
      id:
        type: "string"
        description: "The randomly generated UUID identifying this advice, as defined for a variant 4 UUID in [RFC 4122](https://tools.ietf.org/html/rfc4122)"
      requestId:
        type: "string"
        description: "The UUID identifying the request that this advice relates to"
      time:
        type: "string"
        format: "date-time"
        description: "The date and time of the message as recorded by the sender. The format shall be as defined for date-time in [RFC 3339 section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). It is recommended that the optional time-secfrac be included up to millisecond precision"
      thirdPartyIdentifiers:
        type: "array"
        description: "The unaltered thirdPartyIdentifiers array as supplied in the response message of the request to be reversed. Required if thirdPartyIdentifiers field was present in the response. If no thirdPartyIdentifiers was received in the response or no response was received then this should be set to the thirdPartyIdentifiers sent in the original request."
        items:
          $ref: "#/definitions/ThirdPartyIdentifier"
      reversalReason:
        type: "string"
        description: "The reason for the reversal"
        enum:
        - "TIMEOUT"
        - "CANCELLED"
        - "RESPONSE_NOT_FINAL"
  Originator:
    description: |
      The Originator object encapsulates data relating to the originator of the transaction
    type: "object"
    required:
    - "institution"
    - "merchant"
    - "terminalId"
    properties:
      institution:
        description: "The institution originating the request, as issued by Electrum"
        $ref: "#/definitions/Institution"
      terminalId:
        type: "string"
        description: "The ID that uniquely identifies each device or system in an originator's institution capable of sending requests. Required for transactions initiated from physical card entry or point-of-sale devices"
        minLength: 8
        maxLength: 8
      merchant:
        description: "Merchant data. Required if available"
        $ref: "#/definitions/Merchant"
  PersonalDetails:
    description: |
      Pesonal details of a customer.
    type: "object"
    properties:
      firstName:
        type: "string"
        description: "The person's first name(s)"
        minLength: 0
        maxLength: 40
      lastName:
        type: "string"
        description: "The person's last name"
        minLength: 0
        maxLength: 40
      address:
        type: "string"
        description: "The person's address"
        minLength: 0
        maxLength: 80
      idNumber:
        type: "string"
        description: "The person's ID Number"
        minLength: 0
        maxLength: 13
      contactNumber:
        type: "string"
        description: "The person's contact number"
        minLength: 0
        maxLength: 40
  SlipData:
    description: |
      Data that may be printed on the customer slip for information purposes.
    type: "object"
    properties:
      messageLines:
        type: "array"
        description: "An array of text lines and optional formatting to be printed on the customer slip."
        items:
          $ref: "#/definitions/SlipLine"
      slipWidth:
        type: "integer"
        format: "int32"
        description: "The width of the slip in normal (unformatted) characters."
      issuerReference:
        type: "string"
        description: "An identifier that is printed on the customer slip and uniquely identifies the payment on the service provider's system. This value is used by the customer to request a refund when the service supports this function, and it is thus important that this number is unique."
        pattern: "[A-Z0-9]{1,40}"
  SlipLine:
    description: |
      A line of text to be printed on the till slip.
    type: "object"
    required:
    - "text"
    properties:
      text:
        type: "string"
        description: "Text contained on the line"
      fontWidthScaleFactor:
        type: "number"
        format: "double"
        description: "Scale factor for font width. Assume 1.0 (i.e. normal size) if not present."
      fontHeightScaleFactor:
        type: "number"
        format: "double"
        description: "Scale factor for font height. Assume 1.0 (i.e. normal size) if not present."
      line:
        type: "boolean"
        description: "Denotes a solid line on the slip. Assume false if not present."
        default: false
      cut:
        type: "boolean"
        description: "Indicates the slip should be cut at this line. Assume false if not present."
        default: false
  ThirdPartyIdentifier:
    description: |
      An identifier assigned by an entity which process the message. Identifiers are keyed by institution ID thereby enabling any institution to recall a transaction within the entity's own system using the entity's own identifier. Entity's must not alter the identifier set by another entity. Once an identifier has been set by an entity, all other entity's must send that identifier in subsequent messages.
    type: "object"
    required:
    - "institutionId"
    - "transactionIdentifier"
    properties:
      institutionId:
        type: "string"
        description: "The entity's institution's ID as assigned by Electrum."
        pattern: "[0-9]{1,11}"
      transactionIdentifier:
        type: "string"
        description: "The identifier assigned to this transaction by the institution represented in institutionId. This value should be unique within the institution's system."

